(this["webpackJsonpmegapolis-it_test"]=this["webpackJsonpmegapolis-it_test"]||[]).push([[0],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(21),r=Object(c.a)({basename:"/megapolis-it-test"})},213:function(e,t,n){},214:function(e,t,n){},232:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(69),o=n.n(r),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(119),n(213),n(214);var s=n(244),u=n(112),l=n(40),d=n(30),f=n(0),j=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,250))})),b=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,251))})),h=function(){return Object(f.jsx)(s.c,{history:u.a,children:Object(f.jsx)("div",{className:"page",children:Object(f.jsx)("div",{className:"wrapper",children:Object(f.jsx)(l.b,{children:Object(f.jsxs)(c.Suspense,{fallback:Object(f.jsx)(d.g,{}),children:[Object(f.jsxs)(s.d,{children:[Object(f.jsx)(s.b,{exact:!0,path:"/:id",component:b}),Object(f.jsx)(s.b,{path:"/",component:j})]}),Object(f.jsx)(d.c,{})]})})})})})};o.a.render(Object(f.jsx)(h,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/megapolis-it-test",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/megapolis-it-test","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):a(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):a(t,e)}))}}()},30:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return g}));n(232);var c,r=n(1),o=n.p+"static/media/loading.6f9ac78c.gif",i=n(0),a=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"spinner",children:Object(i.jsx)("img",{src:o,alt:"loading..."})})})},s=(n(234),function(){return Object(i.jsx)("footer",{className:"footer",children:Object(i.jsx)("p",{children:"\xa9 2020 some copyright"})})}),u=(n(235),n(7)),l=n(49),d=n(113),f=n.n(d);!function(e){e.GREEN="green",e.RED="red",e.BLUE="blue"}(c||(c={}));var j=Object(r.forwardRef)((function(e,t){var n=e.text,r=e.Icon,o=e.color,a=void 0===o?c.GREEN:o,s=e.noPreventDefault,d=e.className,j=Object(l.a)(e,["text","Icon","color","noPreventDefault","className"]);return Object(i.jsxs)("button",Object(u.a)(Object(u.a)({},j),{},{ref:t,onClick:function(e){s||"submit"===j.type||e.preventDefault(),j.onClick&&j.onClick(e)},className:f()("button",d,a),"aria-label":null!==n&&void 0!==n?n:"icon button",children:[n&&Object(i.jsx)("span",{children:n}),r&&Object(i.jsx)(r,{})]}))})),b=(n(236),n(38)),h=n(37),O=function(e){var t=e.note,n=e.textSumbit,o=e.onInputChange,a=e.onSumbit,s=Object(r.useState)(t),l=Object(h.a)(s,2),d=l[0],f=l[1];return Object(r.useEffect)((function(){null===o||void 0===o||o(d)}),[d,o]),Object(i.jsxs)("div",{className:"form",children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"title",children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(i.jsx)("input",{className:"form-input",name:"title",type:"text",value:d.title,onChange:function(e){var t=e.target,n=t.name,c=t.value;null===o||void 0===o||o(d),f((function(e){var t;return Object(u.a)(Object(u.a)({},e),{},(t={},Object(b.a)(t,n,c),Object(b.a)(t,n+"Error",""),t))}))}}),Object(i.jsx)("span",{className:"input-error",children:d.titleError})]}),Object(i.jsx)("div",{className:"form-group",children:Object(i.jsx)(j,{text:n,color:c.BLUE,onClick:function(e){e.preventDefault();var n=function(e){return e?"":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}(d.title);f((function(e){return Object(u.a)(Object(u.a)({},e),{},{titleError:n})})),n||a(Object(u.a)(Object(u.a)({},t),d))}})})]})},v=(n(237),function(e){var t=e.header,n=e.headerButton,c=e.children;return Object(i.jsxs)("div",{className:"page-index",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"header-title",children:Object(i.jsx)("h1",{children:t})}),Object(i.jsx)("div",{className:"header-button",children:n})]}),Object(i.jsx)("div",{className:"content",children:c})]})}),p=(n(238),n(40)),g=function(e){var t=e.children,n=Object(r.useContext)(p.a),c=n.isLoading,o=n.data;return c?Object(i.jsx)(a,{}):!o||o.error?Object(i.jsx)("div",{className:"content-error",children:(null===o||void 0===o?void 0:o.error)||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430"}):Object(i.jsx)(i.Fragment,{children:t})}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return b}));var c=n(49),r=n(7),o=n(37),i=n(1),a=n.n(i),s=n(39),u=n.n(s),l=n(30),d=n(0),f={isLoading:!0,data:{data:[],length:0,success:!1,error:""},CreateNote:function(){return new Promise((function(){}))},ChangeNote:function(){return new Promise((function(){}))},RemoveNote:function(){return new Promise((function(){}))}},j=a.a.createContext(f),b=function(e){var t=e.children,n=Object(i.useState)(!0),a=Object(o.a)(n,2),s=a[0],b=a[1],h=Object(i.useState)(f.data),O=Object(o.a)(h,2),v=O[0],p=O[1];return Object(i.useEffect)((function(){u.a.get("https://test.megapolis-it.ru/api/list").then((function(e){return e.data})).then((function(e){return p(e)})).then((function(){return b(!1)})).catch((function(e){console.log(e),b(!1)}))}),[]),Object(d.jsx)(j.Provider,{value:{isLoading:s,data:v,CreateNote:function(e){return u.a.post("https://test.megapolis-it.ru/api/list",e).then((function(e){return e.data})).then((function(t){!t.error&&t.success&&(v.data.push(Object(r.a)(Object(r.a)({},e),{},{id:t.id})),v.length=v.data.length),p(Object(r.a)(Object(r.a)({},v),t))})).catch(console.log)},ChangeNote:function(e){var t=e.id,n=Object(c.a)(e,["id"]);return u.a.post("".concat("https://test.megapolis-it.ru/api/list","/").concat(t),n).then((function(e){return e.data})).then((function(e){!e.error&&e.success&&(v.data=v.data.map((function(e){return e.id===t&&(e=Object(r.a)(Object(r.a)({},e),n)),e}))),p(Object(r.a)(Object(r.a)({},v),e))})).catch(console.log)},RemoveNote:function(e){return u.a.delete("".concat("https://test.megapolis-it.ru/api/list","/").concat(e.id)).then((function(e){return e.data})).then((function(t){!t.error&&t.success&&(v.data=v.data.filter((function(t){return t.id!==e.id})),v.length=v.data.length),p(Object(r.a)(Object(r.a)({},v),t))})).catch(console.log)}},children:Object(d.jsx)(l.e,{children:t})})}}},[[243,1,2]]]);
//# sourceMappingURL=main.f03fc378.chunk.js.map